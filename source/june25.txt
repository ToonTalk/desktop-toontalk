Seems that getextent doesn't grok new lines so I should make my own and use it for both width and height - no point computing it twice. I guess both correct_font_width and correct_font_height should be replaced by correct_font_size...